<!doctype html>
<html lang="ms">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Healio - Rakan Kesihatan Peribadi</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(-10px) rotate(240deg); }
        }
        
        @keyframes bubble {
            0% { transform: translateY(100vh) scale(0); }
            100% { transform: translateY(-100px) scale(1); }
        }
        
        .floating-bubble {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(134, 239, 172, 0.3), rgba(196, 181, 253, 0.3));
            animation: bubble 8s infinite linear;
            pointer-events: none;
        }
        
        .floating-element {
            animation: float 6s ease-in-out infinite;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #f0fdf4 0%, #faf5ff 50%, #ffffff 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(134, 239, 172, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #86efac, #a78bfa);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #4ade80, #8b5cf6);
            transform: translateY(-2px);
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #86efac, #a78bfa);
            border-radius: 10px;
            height: 8px;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="gradient-bg min-h-full overflow-x-hidden"><!-- Floating Bubbles Background -->
  <div id="bubbles-container" class="fixed inset-0 pointer-events-none z-0"></div><!-- Navigation -->
  <nav class="bg-white/80 backdrop-blur-md shadow-lg rounded-b-3xl mx-4 mb-6 relative z-10">
   <div class="max-w-7xl mx-auto px-6 py-4">
    <div class="flex items-center justify-between"><button onclick="showSection('home')" class="flex items-center space-x-2 text-2xl font-bold text-green-600 hover:text-green-700 transition-colors"> <span>ğŸŒ¿</span> <span id="app-title">HEALIO</span> </button> <button onclick="showSection('home')" class="btn-primary text-white px-6 py-2 rounded-full font-medium"> ğŸ  Laman Utama </button>
    </div>
   </div>
  </nav><!-- Main Container -->
  <div class="max-w-7xl mx-auto px-4 relative z-10"><!-- Home Section -->
   <section id="home-section" class="text-center mb-12">
    <div class="mb-8">
     <div class="mb-6">
      <h1 class="text-6xl font-bold bg-gradient-to-r from-green-400 via-purple-300 to-pink-300 bg-clip-text text-transparent mb-2" id="app-title-large">HEALIO</h1>
      <div class="w-32 h-1 bg-gradient-to-r from-green-300 to-purple-300 mx-auto rounded-full"></div>
     </div>
     <h2 class="text-4xl font-bold text-gray-800 mb-4" id="main-tagline">Rakan Kesihatan Peribadi Awak</h2>
     <p class="text-xl text-gray-600 mb-8" id="welcome-message">Sihat dan Bahagia bersama Healio</p>
    </div><!-- Feature Cards Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12"><!-- Health Check Card -->
     <div class="card-hover bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-lg">
      <div class="text-4xl mb-4">
       ğŸ©º
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-3">Semakan Kesihatan</h3>
      <p class="text-gray-600 mb-4">Kira BMI dan dapatkan saranan kesihatan peribadi</p><button onclick="showSection('health-check')" class="btn-primary text-white px-6 py-2 rounded-full font-medium w-full"> Mula Semakan </button>
     </div><!-- Exercise Card -->
     <div class="card-hover bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-lg">
      <div class="text-4xl mb-4">
       ğŸƒ
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-3">Cadangan Senaman</h3>
      <p class="text-gray-600 mb-4">Senaman yang sesuai dengan tahap kesihatan anda</p><button onclick="showSection('exercise')" class="btn-primary text-white px-6 py-2 rounded-full font-medium w-full"> Lihat Senaman </button>
     </div><!-- Calories Card -->
     <div class="card-hover bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-lg">
      <div class="text-4xl mb-4">
       ğŸ
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-3">Kalori &amp; Diet</h3>
      <p class="text-gray-600 mb-4">Jejak kalori dan dapatkan resepi sihat</p><button onclick="showSection('calories')" class="btn-primary text-white px-6 py-2 rounded-full font-medium w-full"> Kira Kalori </button>
     </div><!-- Mental Health Card -->
     <div class="card-hover bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-lg">
      <div class="text-4xl mb-4">
       ğŸ§ 
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-3">Kesihatan Mental</h3>
      <p class="text-gray-600 mb-4">Ujian dan sokongan kesihatan mental</p><button onclick="showSection('mental-health')" class="btn-primary text-white px-6 py-2 rounded-full font-medium w-full"> Ujian Mental </button>
     </div><!-- MBTI Card -->
     <div class="card-hover bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-lg">
      <div class="text-4xl mb-4">
       ğŸ§¬
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-3">Personaliti MBTI</h3>
      <p class="text-gray-600 mb-4">Kenali personaliti dan gaya hidup sesuai</p><button onclick="showSection('mbti')" class="btn-primary text-white px-6 py-2 rounded-full font-medium w-full"> Ujian MBTI </button>
     </div><!-- NCD Info Card -->
     <div class="card-hover bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-lg">
      <div class="text-4xl mb-4">
       â¤ï¸
      </div>
      <h3 class="text-xl font-bold text-gray-800 mb-3">NCD Info</h3>
      <p class="text-gray-600 mb-4">Maklumat penyakit tidak berjangkit</p><button onclick="showSection('ncd-info')" class="btn-primary text-white px-6 py-2 rounded-full font-medium w-full"> Baca Info </button>
     </div>
    </div><!-- Dashboard Button -->
    <div class="text-center"><button onclick="showSection('dashboard')" class="btn-primary text-white px-8 py-3 rounded-full font-bold text-lg shadow-lg"> ğŸ“Š Dashboard Saya </button>
    </div>
   </section><!-- Health Check Section -->
   <section id="health-check-section" class="hidden">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg max-w-4xl mx-auto">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸ©º Semakan Kesihatan</h2>
      <p class="text-gray-600">Masukkan maklumat anda untuk mendapat penilaian kesihatan</p>
     </div>
     <form id="health-form" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
       <div><label for="name" class="block text-sm font-medium text-gray-700 mb-2">Nama</label> <input type="text" id="name" name="name" required class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
       </div>
       <div><label for="age" class="block text-sm font-medium text-gray-700 mb-2">Umur</label> <input type="number" id="age" name="age" required class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
       </div>
       <div><label for="job" class="block text-sm font-medium text-gray-700 mb-2">Pekerjaan</label> <input type="text" id="job" name="job" required class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
       </div>
       <div><label for="height" class="block text-sm font-medium text-gray-700 mb-2">Tinggi (cm)</label> <input type="number" id="height" name="height" required class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
       </div>
       <div><label for="weight" class="block text-sm font-medium text-gray-700 mb-2">Berat (kg)</label> <input type="number" id="weight" name="weight" required class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
       </div>
       <div><label for="blood-pressure" class="block text-sm font-medium text-gray-700 mb-2">Tekanan Darah (pilihan)</label> <input type="text" id="blood-pressure" name="blood-pressure" placeholder="120/80" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
       </div>
       <div class="md:col-span-2"><label for="blood-sugar" class="block text-sm font-medium text-gray-700 mb-2">Gula dalam Darah (pilihan)</label> <input type="text" id="blood-sugar" name="blood-sugar" placeholder="mg/dL" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
       </div>
      </div>
      <div class="text-center"><button type="submit" class="btn-primary text-white px-8 py-3 rounded-full font-bold text-lg"> <span id="health-submit-text">Analisis Kesihatan</span> <span id="health-loading" class="hidden">Menganalisis...</span> </button>
      </div>
     </form>
     <div id="health-results" class="hidden mt-8 p-6 bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl"><!-- Results will be populated here -->
     </div>
     <div class="text-center mt-6"><button onclick="showSection('home')" class="text-gray-600 hover:text-gray-800 font-medium"> â† Kembali ke Laman Utama </button>
     </div>
    </div>
   </section><!-- Exercise Section -->
   <section id="exercise-section" class="hidden">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg max-w-4xl mx-auto">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸƒ Cadangan Senaman</h2>
      <p class="text-gray-600">Senaman yang sesuai untuk anda berdasarkan tahap kesihatan</p>
     </div>
     <div id="exercise-content" class="space-y-6"><!-- Motivational Quote -->
      <div class="bg-gradient-to-r from-green-100 to-purple-100 rounded-2xl p-6 text-center">
       <h3 class="text-xl font-bold text-gray-800 mb-2">ğŸ’ª Motivasi Hari Ini</h3>
       <p class="text-gray-700 italic">"Kesihatan adalah kekayaan sebenar. Mulakan dengan satu langkah hari ini!"</p>
      </div><!-- Daily Steps Tracker -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“± Jejak Langkah Harian</h3>
       <div class="flex items-center justify-between mb-4"><span class="text-gray-600">Langkah Hari Ini:</span> <input type="number" id="daily-steps" placeholder="0" class="px-3 py-2 rounded-lg border border-gray-300 w-24 text-center">
       </div><button onclick="saveSteps()" class="btn-primary text-white px-4 py-2 rounded-full font-medium"> Simpan Langkah </button>
       <div class="mt-4">
        <div class="flex justify-between text-sm text-gray-600 mb-1"><span>Sasaran: 10,000 langkah</span> <span id="steps-percentage">0%</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
         <div id="steps-progress" class="progress-bar h-2 rounded-full" style="width: 0%"></div>
        </div>
       </div>
      </div><!-- Exercise Recommendations -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
       <div class="bg-white rounded-2xl p-6 shadow-md">
        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸƒâ€â™€ï¸ Senaman Kardio</h3>
        <ul class="space-y-2 text-gray-600">
         <li>â€¢ Berjalan kaki 30 minit</li>
         <li>â€¢ Jogging ringan 20 minit</li>
         <li>â€¢ Berbasikal 45 minit</li>
         <li>â€¢ Berenang 30 minit</li>
        </ul>
       </div>
       <div class="bg-white rounded-2xl p-6 shadow-md">
        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’ª Senaman Kekuatan</h3>
        <ul class="space-y-2 text-gray-600">
         <li>â€¢ Push-up 3 set x 10</li>
         <li>â€¢ Squat 3 set x 15</li>
         <li>â€¢ Plank 3 set x 30 saat</li>
         <li>â€¢ Lunges 3 set x 12</li>
        </ul>
       </div>
      </div><!-- External App Links -->
      <div class="bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl p-6">
       <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“± Aplikasi Senaman Disyorkan</h3>
       <div class="grid grid-cols-2 md:grid-cols-4 gap-4"><a href="https://fit.google.com" target="_blank" rel="noopener noreferrer" class="bg-white rounded-xl p-4 text-center hover:shadow-md transition-shadow">
         <div class="text-2xl mb-2">
          ğŸ“Š
         </div>
         <div class="text-sm font-medium">
          Google Fit
         </div></a> <a href="https://www.nike.com/ntc-app" target="_blank" rel="noopener noreferrer" class="bg-white rounded-xl p-4 text-center hover:shadow-md transition-shadow">
         <div class="text-2xl mb-2">
          ğŸ‘Ÿ
         </div>
         <div class="text-sm font-medium">
          Nike Training
         </div></a> <a href="https://www.strava.com" target="_blank" rel="noopener noreferrer" class="bg-white rounded-xl p-4 text-center hover:shadow-md transition-shadow">
         <div class="text-2xl mb-2">
          ğŸš´
         </div>
         <div class="text-sm font-medium">
          Strava
         </div></a> <a href="https://jomrun.com" target="_blank" rel="noopener noreferrer" class="bg-white rounded-xl p-4 text-center hover:shadow-md transition-shadow">
         <div class="text-2xl mb-2">
          ğŸƒ
         </div>
         <div class="text-sm font-medium">
          JomRun
         </div></a>
       </div>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="showSection('home')" class="text-gray-600 hover:text-gray-800 font-medium"> â† Kembali ke Laman Utama </button>
     </div>
    </div>
   </section><!-- Calories Section -->
   <section id="calories-section" class="hidden">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg max-w-4xl mx-auto">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸ Kalori &amp; Diet</h2>
      <p class="text-gray-600">Jejak kalori harian dan dapatkan cadangan diet sihat</p>
     </div><!-- Food Input -->
     <div class="bg-white rounded-2xl p-6 shadow-md mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ½ï¸ Tambah Makanan</h3><!-- Toggle between preset and custom -->
      <div class="flex justify-center mb-6">
       <div class="bg-gray-100 rounded-full p-1 flex"><button type="button" id="preset-toggle" onclick="toggleFoodMode('preset')" class="px-6 py-2 rounded-full font-medium transition-all bg-green-500 text-white"> ğŸ“‹ Makanan Preset </button> <button type="button" id="custom-toggle" onclick="toggleFoodMode('custom')" class="px-6 py-2 rounded-full font-medium transition-all text-gray-600 hover:text-gray-800"> âœï¸ Makanan Custom </button>
       </div>
      </div>
      <form id="food-form" class="space-y-4"><!-- Preset Food Mode -->
       <div id="preset-mode" class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div><label for="food-name" class="block text-sm font-medium text-gray-700 mb-2">Nama Makanan</label> <select id="food-name" name="food-name" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500"> <option value="">Pilih makanan...</option> <option value="nasi-lemak">Nasi Lemak (644 kcal)</option> <option value="teh-susu">Teh Susu (150 kcal)</option> <option value="steamboat">Steamboat (400 kcal)</option> <option value="roti-canai">Roti Canai (301 kcal)</option> <option value="mee-goreng">Mee Goreng (535 kcal)</option> <option value="char-kuey-teow">Char Kuey Teow (744 kcal)</option> <option value="laksa">Laksa (569 kcal)</option> <option value="rendang">Rendang (468 kcal)</option> <option value="satay">Satay 10 cucuk (400 kcal)</option> <option value="cendol">Cendol (280 kcal)</option> </select>
        </div>
        <div><label for="portion" class="block text-sm font-medium text-gray-700 mb-2">Bahagian</label> <input type="number" id="portion" name="portion" value="1" min="0.5" step="0.5" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500">
        </div>
        <div class="flex items-end"><button type="submit" class="btn-primary text-white px-6 py-3 rounded-2xl font-medium w-full"> <span id="food-submit-text">Tambah</span> <span id="food-loading" class="hidden">Menambah...</span> </button>
        </div>
       </div><!-- Custom Food Mode -->
       <div id="custom-mode" class="hidden">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
         <div><label for="custom-food-name" class="block text-sm font-medium text-gray-700 mb-2">Nama Makanan</label> <input type="text" id="custom-food-name" name="custom-food-name" placeholder="Contoh: Nasi Goreng Kampung" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-purple-500">
         </div>
         <div><label for="custom-calories" class="block text-sm font-medium text-gray-700 mb-2">Kalori (kcal)</label> <input type="number" id="custom-calories" name="custom-calories" placeholder="300" min="1" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-purple-500">
         </div>
         <div><label for="custom-portion" class="block text-sm font-medium text-gray-700 mb-2">Bahagian</label> <input type="number" id="custom-portion" name="custom-portion" value="1" min="0.5" step="0.5" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-purple-500">
         </div>
         <div class="flex items-end"><button type="submit" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-2xl font-medium w-full transition-all"> <span id="custom-food-submit-text">Tambah Custom</span> <span id="custom-food-loading" class="hidden">Menambah...</span> </button>
         </div>
        </div><!-- Calorie Reference Guide -->
        <div class="mt-6 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl">
         <h4 class="font-semibold text-purple-800 mb-3">ğŸ“š Panduan Kalori Rujukan</h4>
         <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            ğŸš Nasi (1 mangkuk)
           </div>
           <div class="text-purple-600">
            ~200 kcal
           </div>
          </div>
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            ğŸ— Ayam goreng (1 keping)
           </div>
           <div class="text-purple-600">
            ~250 kcal
           </div>
          </div>
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            ğŸ¥š Telur (1 biji)
           </div>
           <div class="text-purple-600">
            ~70 kcal
           </div>
          </div>
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            ğŸŒ Pisang (1 biji)
           </div>
           <div class="text-purple-600">
            ~90 kcal
           </div>
          </div>
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            ğŸ Roti (1 keping)
           </div>
           <div class="text-purple-600">
            ~80 kcal
           </div>
          </div>
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            ğŸ¥› Susu (1 gelas)
           </div>
           <div class="text-purple-600">
            ~150 kcal
           </div>
          </div>
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            ğŸ Epal (1 biji)
           </div>
           <div class="text-purple-600">
            ~80 kcal
           </div>
          </div>
          <div class="bg-white rounded-lg p-2 text-center">
           <div class="font-medium">
            â˜• Kopi O (1 cawan)
           </div>
           <div class="text-purple-600">
            ~5 kcal
           </div>
          </div>
         </div>
        </div>
       </div><!-- Total Calories Display for Custom -->
       <div id="custom-total-display" class="hidden text-center p-3 bg-purple-50 rounded-xl"><span class="text-purple-700 font-medium">Jumlah Kalori: </span> <span id="custom-total-calories" class="text-purple-800 font-bold text-lg">0 kcal</span>
       </div>
      </form>
     </div><!-- Daily Calories Summary -->
     <div class="bg-gradient-to-r from-green-100 to-purple-100 rounded-2xl p-6 mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“Š Ringkasan Kalori Hari Ini</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
       <div>
        <div class="text-2xl font-bold text-green-600" id="total-calories">
         0
        </div>
        <div class="text-sm text-gray-600">
         Kalori Diambil
        </div>
       </div>
       <div>
        <div class="text-2xl font-bold text-purple-600">
         2000
        </div>
        <div class="text-sm text-gray-600">
         Sasaran Harian
        </div>
       </div>
       <div>
        <div class="text-2xl font-bold text-blue-600" id="remaining-calories">
         2000
        </div>
        <div class="text-sm text-gray-600">
         Baki Kalori
        </div>
       </div>
      </div>
      <div class="mt-4">
       <div class="w-full bg-gray-200 rounded-full h-3">
        <div id="calorie-progress" class="progress-bar h-3 rounded-full" style="width: 0%"></div>
       </div>
      </div>
     </div><!-- Diet Types -->
     <div class="bg-white rounded-2xl p-6 shadow-md mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ¥— Jenis Diet Popular</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
       <div class="border border-gray-200 rounded-xl p-4">
        <h4 class="font-bold text-gray-800 mb-2">Intermittent Fasting</h4>
        <p class="text-sm text-gray-600">Makan dalam window masa 8 jam, puasa 16 jam</p>
       </div>
       <div class="border border-gray-200 rounded-xl p-4">
        <h4 class="font-bold text-gray-800 mb-2">OMAD</h4>
        <p class="text-sm text-gray-600">One Meal A Day - satu hidangan sahaja sehari</p>
       </div>
       <div class="border border-gray-200 rounded-xl p-4">
        <h4 class="font-bold text-gray-800 mb-2">Diet Seimbang</h4>
        <p class="text-sm text-gray-600">Kombinasi karbohidrat, protein dan sayuran</p>
       </div>
      </div>
     </div><!-- Healthy Recipes -->
     <div class="bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl p-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ³ Resepi Sihat Hari Ini</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
       <div class="bg-white rounded-xl p-4">
        <h4 class="font-bold text-gray-800 mb-2">Salad Quinoa Mediterranean</h4>
        <p class="text-sm text-gray-600 mb-3">Quinoa, tomato cherry, timun, olive oil - 320 kcal</p><a href="https://cookpad.com/eng" target="_blank" rel="noopener noreferrer" class="btn-primary text-white px-4 py-2 rounded-full text-sm font-medium inline-block"> Resepi Sihat </a>
       </div>
       <div class="bg-white rounded-xl p-4">
        <h4 class="font-bold text-gray-800 mb-2">Sup Sayuran Protein</h4>
        <p class="text-sm text-gray-600 mb-3">Tauhu, sayuran campur, kuah clear - 180 kcal</p><a href="https://cookpad.com/eng" target="_blank" rel="noopener noreferrer" class="btn-primary text-white px-4 py-2 rounded-full text-sm font-medium inline-block"> Resepi Sihat </a>
       </div>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="showSection('home')" class="text-gray-600 hover:text-gray-800 font-medium"> â† Kembali ke Laman Utama </button>
     </div>
    </div>
   </section><!-- Mental Health Section -->
   <section id="mental-health-section" class="hidden">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg max-w-4xl mx-auto">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸ§  Kesihatan Mental</h2>
      <p class="text-gray-600">Ujian dan sokongan untuk kesihatan mental anda</p>
     </div><!-- Self Test Link -->
     <div class="bg-gradient-to-r from-green-100 to-purple-100 rounded-2xl p-6 text-center mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ” Ujian Kendiri</h3>
      <p class="text-gray-600 mb-4">Lakukan ujian kesihatan mental rasmi dari Kementerian Kesihatan Malaysia</p><a href="https://mentari.moh.gov.my/self-test/" target="_blank" rel="noopener noreferrer" class="btn-primary text-white px-6 py-3 rounded-full font-bold inline-block"> Mula Ujian Kendiri </a>
     </div><!-- Manual Result Input -->
     <div class="bg-white rounded-2xl p-6 shadow-md mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“ Masukkan Keputusan Ujian DASS-21</h3>
      <form id="mental-health-form" class="space-y-6"><!-- Anxiety Section -->
       <div class="p-4 bg-blue-50 rounded-xl">
        <h4 class="font-semibold text-blue-800 mb-3">ğŸ˜° Anxiety (Kebimbangan)</h4><label for="anxiety-level" class="block text-sm font-medium text-gray-700 mb-2">Tahap Anxiety</label> <select id="anxiety-level" name="anxiety-level" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-blue-500"> <option value="">Pilih tahap anxiety...</option> <option value="normal">Normal (0-7)</option> <option value="ringan">Ringan (8-9)</option> <option value="sederhana">Sederhana (10-14)</option> <option value="teruk">Teruk (15-19)</option> <option value="sangat-teruk">Sangat Teruk (20+)</option> </select>
       </div><!-- Depression Section -->
       <div class="p-4 bg-purple-50 rounded-xl">
        <h4 class="font-semibold text-purple-800 mb-3">ğŸ˜” Depression (Kemurungan)</h4><label for="depression-level" class="block text-sm font-medium text-gray-700 mb-2">Tahap Depression</label> <select id="depression-level" name="depression-level" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-purple-500"> <option value="">Pilih tahap depression...</option> <option value="normal">Normal (0-9)</option> <option value="ringan">Ringan (10-13)</option> <option value="sederhana">Sederhana (14-20)</option> <option value="teruk">Teruk (21-27)</option> <option value="sangat-teruk">Sangat Teruk (28+)</option> </select>
       </div><!-- Stress Section -->
       <div class="p-4 bg-red-50 rounded-xl">
        <h4 class="font-semibold text-red-800 mb-3">ğŸ˜¤ Stress (Tekanan)</h4><label for="stress-level" class="block text-sm font-medium text-gray-700 mb-2">Tahap Stress</label> <select id="stress-level" name="stress-level" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-red-500"> <option value="">Pilih tahap stress...</option> <option value="normal">Normal (0-14)</option> <option value="ringan">Ringan (15-18)</option> <option value="sederhana">Sederhana (19-25)</option> <option value="teruk">Teruk (26-33)</option> <option value="sangat-teruk">Sangat Teruk (34+)</option> </select>
       </div><button type="submit" class="btn-primary text-white px-6 py-3 rounded-full font-medium w-full"> <span id="mental-submit-text">Simpan Keputusan &amp; Dapatkan Cadangan</span> <span id="mental-loading" class="hidden">Menyimpan...</span> </button>
      </form>
     </div><!-- Mental Health Results -->
     <div id="mental-health-results" class="hidden mb-6"><!-- Results will be populated here -->
     </div><!-- Motivational Quotes Slider -->
     <div class="bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl p-6 mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’ Kata-kata Motivasi</h3>
      <div class="relative">
       <div id="quote-container" class="text-center p-4 bg-white rounded-xl shadow-sm">
        <p id="current-quote" class="text-gray-700 italic text-lg mb-2"></p>
       </div>
       <div class="flex justify-center mt-4 space-x-2"><button onclick="previousQuote()" class="bg-white rounded-full p-2 shadow-md hover:shadow-lg transition-shadow"> â† </button> <button onclick="nextQuote()" class="bg-white rounded-full p-2 shadow-md hover:shadow-lg transition-shadow"> â†’ </button>
       </div>
      </div>
     </div><!-- Mental Health Resources -->
     <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸµ Aktiviti Menenangkan</h3>
       <ul class="space-y-3 text-gray-600">
        <li class="flex items-center space-x-2"><span>ğŸ¶</span> <span>Dengar muzik tenang</span></li>
        <li class="flex items-center space-x-2"><span>ğŸ§©</span> <span>Permainan minda</span></li>
        <li class="flex items-center space-x-2"><span>ğŸ“</span> <span>Tulis jurnal harian</span></li>
        <li class="flex items-center space-x-2"><span>ğŸ§˜</span> <span>Meditasi 10 minit</span></li>
       </ul>
      </div>
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ†˜ Talian Bantuan</h3>
       <div class="space-y-3">
        <div class="p-3 bg-red-50 rounded-xl">
         <div class="font-bold text-red-800">
          Talian HEAL
         </div>
         <div class="text-red-600">
          15555
         </div>
         <div class="text-sm text-red-600">
          24 jam, percuma
         </div>
        </div>
        <div class="p-3 bg-blue-50 rounded-xl">
         <div class="font-bold text-blue-800">
          Befrienders
         </div>
         <div class="text-blue-600">
          03-7627 2929
         </div>
         <div class="text-sm text-blue-600">
          24 jam, sokongan emosi
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="showSection('home')" class="text-gray-600 hover:text-gray-800 font-medium"> â† Kembali ke Laman Utama </button>
     </div>
    </div>
   </section><!-- MBTI Section -->
   <section id="mbti-section" class="hidden">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg max-w-4xl mx-auto">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸ§¬ Personaliti MBTI</h2>
      <p class="text-gray-600">Kenali personaliti anda dan dapatkan cadangan gaya hidup sesuai</p>
     </div><!-- MBTI Test Link -->
     <div class="bg-gradient-to-r from-green-100 to-purple-100 rounded-2xl p-6 text-center mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ” Ujian Personaliti MBTI</h3>
      <p class="text-gray-600 mb-4">Lakukan ujian personaliti rasmi untuk mengetahui jenis MBTI anda</p><a href="https://www.16personalities.com/free-personality-test" target="_blank" rel="noopener noreferrer" class="btn-primary text-white px-6 py-3 rounded-full font-bold inline-block"> Mula Ujian MBTI </a>
     </div><!-- MBTI Result Input -->
     <div class="bg-white rounded-2xl p-6 shadow-md mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“ Masukkan Keputusan MBTI</h3>
      <form id="mbti-form" class="space-y-4">
       <div><label for="mbti-type" class="block text-sm font-medium text-gray-700 mb-2">Jenis MBTI Anda</label> <select id="mbti-type" name="mbti-type" class="w-full px-4 py-3 rounded-2xl border border-gray-300 focus:ring-2 focus:ring-green-500"> <option value="">Pilih jenis MBTI...</option> <option value="INTJ">INTJ - The Architect</option> <option value="INTP">INTP - The Thinker</option> <option value="ENTJ">ENTJ - The Commander</option> <option value="ENTP">ENTP - The Debater</option> <option value="INFJ">INFJ - The Advocate</option> <option value="INFP">INFP - The Mediator</option> <option value="ENFJ">ENFJ - The Protagonist</option> <option value="ENFP">ENFP - The Campaigner</option> <option value="ISTJ">ISTJ - The Logistician</option> <option value="ISFJ">ISFJ - The Protector</option> <option value="ESTJ">ESTJ - The Executive</option> <option value="ESFJ">ESFJ - The Consul</option> <option value="ISTP">ISTP - The Virtuoso</option> <option value="ISFP">ISFP - The Adventurer</option> <option value="ESTP">ESTP - The Entrepreneur</option> <option value="ESFP">ESFP - The Entertainer</option> </select>
       </div><button type="submit" class="btn-primary text-white px-6 py-3 rounded-full font-medium"> <span id="mbti-submit-text">Simpan MBTI</span> <span id="mbti-loading" class="hidden">Menyimpan...</span> </button>
      </form>
     </div><!-- MBTI Recommendations -->
     <div id="mbti-recommendations" class="hidden">
      <div class="bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl p-6 mb-6">
       <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ¯ Cadangan Gaya Hidup</h3>
       <div id="mbti-lifestyle-content"><!-- Content will be populated based on MBTI type -->
       </div>
      </div>
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’ª Senaman Sesuai</h3>
       <div id="mbti-exercise-content"><!-- Content will be populated based on MBTI type -->
       </div>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="showSection('home')" class="text-gray-600 hover:text-gray-800 font-medium"> â† Kembali ke Laman Utama </button>
     </div>
    </div>
   </section><!-- NCD Info Section -->
   <section id="ncd-info-section" class="hidden">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg max-w-6xl mx-auto">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">â¤ï¸ Maklumat NCD</h2>
      <p class="text-gray-600">Penyakit Tidak Berjangkit - Punca, Kesan &amp; Pencegahan</p>
      <p class="text-sm text-gray-500 mt-2">Sumber: Kementerian Kesihatan Malaysia, WHO, Jabatan Kesihatan Negeri Selangor, NHMS 2023</p>
     </div><!-- Key Statistics Banner -->
     <div class="bg-gradient-to-r from-red-100 to-orange-100 rounded-2xl p-6 mb-8 border-l-4 border-red-500">
      <h3 class="text-xl font-bold text-red-800 mb-3">ğŸš¨ Statistik Kritikal Malaysia (NHMS 2023)</h3>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
       <div class="bg-white rounded-xl p-4">
        <div class="text-2xl font-bold text-red-600">
         73%
        </div>
        <div class="text-sm text-gray-600">
         Kematian akibat NCD
        </div>
       </div>
       <div class="bg-white rounded-xl p-4">
        <div class="text-2xl font-bold text-orange-600">
         3.9 juta
        </div>
        <div class="text-sm text-gray-600">
         Pesakit diabetes
        </div>
       </div>
       <div class="bg-white rounded-xl p-4">
        <div class="text-2xl font-bold text-purple-600">
         6.4 juta
        </div>
        <div class="text-sm text-gray-600">
         Pesakit hipertensi
        </div>
       </div>
       <div class="bg-white rounded-xl p-4">
        <div class="text-2xl font-bold text-yellow-600">
         RM9.65b
        </div>
        <div class="text-sm text-gray-600">
         Kos rawatan NCD
        </div>
       </div>
      </div>
     </div><!-- NCD Cards Grid -->
     <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"><!-- Diabetes Card -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <div class="flex items-center mb-4"><span class="text-3xl mr-3">ğŸ©¸</span>
        <h3 class="text-xl font-bold text-gray-800">Diabetes Mellitus</h3>
       </div>
       <div class="space-y-4">
        <div>
         <h4 class="font-semibold text-red-600 mb-2">Punca Utama:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Resistensi insulin (Jenis 2 - 90% kes)</li>
          <li>â€¢ Faktor genetik dan keturunan</li>
          <li>â€¢ Obesiti (BMI â‰¥30) - risiko 7x ganda</li>
          <li>â€¢ Gaya hidup sedentari</li>
          <li>â€¢ Diet tinggi gula dan karbohidrat ringkas</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-orange-600 mb-2">Komplikasi Serius:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Nefropati diabetik (gagal buah pinggang)</li>
          <li>â€¢ Retinopati diabetik (kebutaan)</li>
          <li>â€¢ Neuropati (kerosakan saraf)</li>
          <li>â€¢ Penyakit kardiovaskular (3x risiko)</li>
          <li>â€¢ Ulser kaki diabetik &amp; amputasi</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-green-600 mb-2">Pencegahan Berkesan:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Kurangkan berat badan 5-10%</li>
          <li>â€¢ Senaman 150 min/minggu (sederhana)</li>
          <li>â€¢ Diet rendah indeks glisemik</li>
          <li>â€¢ Saringan HbA1c setiap 3 tahun (â‰¥45 tahun)</li>
         </ul>
        </div>
       </div>
       <div class="mt-4 space-y-2">
        <div class="p-3 bg-blue-50 rounded-lg">
         <div class="text-sm font-medium text-blue-800">
          Prevalens Malaysia (NHMS 2023):
         </div>
         <div class="text-sm text-blue-600">
          â€¢ 18.3% dewasa (3.9 juta orang)
         </div>
         <div class="text-sm text-blue-600">
          â€¢ Lelaki: 19.4% | Wanita: 17.3%
         </div>
        </div>
        <div class="p-3 bg-red-50 rounded-lg">
         <div class="text-sm font-medium text-red-800">
          Sasaran WHO 2030:
         </div>
         <div class="text-sm text-red-600">
          Kurangkan prevalens kepada 15%
         </div>
        </div>
       </div>
      </div><!-- Hypertension Card -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <div class="flex items-center mb-4"><span class="text-3xl mr-3">ğŸ’“</span>
        <h3 class="text-xl font-bold text-gray-800">Hipertensi</h3>
       </div>
       <div class="space-y-4">
        <div>
         <h4 class="font-semibold text-red-600 mb-2">Faktor Risiko:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Pengambilan natrium &gt;2300mg/hari</li>
          <li>â€¢ Kurang kalium (&lt;3500mg/hari)</li>
          <li>â€¢ Alkohol berlebihan (&gt;2 unit/hari)</li>
          <li>â€¢ Stress kronik &amp; kurang tidur</li>
          <li>â€¢ Merokok (nikotin vasokonstriksi)</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-orange-600 mb-2">Komplikasi Utama:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Strok (risiko 4x ganda)</li>
          <li>â€¢ Infarksi miokardium akut</li>
          <li>â€¢ Gagal jantung kongestif</li>
          <li>â€¢ Penyakit buah pinggang kronik</li>
          <li>â€¢ Retinopati hipertensif</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-green-600 mb-2">Strategi Kawalan:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Diet DASH (rendah natrium)</li>
          <li>â€¢ Kurangkan garam &lt;6g/hari</li>
          <li>â€¢ Senaman aerobik 30min, 5x/minggu</li>
          <li>â€¢ Teknik pengurusan stress</li>
         </ul>
        </div>
       </div>
       <div class="mt-4 space-y-2">
        <div class="p-3 bg-red-50 rounded-lg">
         <div class="text-sm font-medium text-red-800">
          Prevalens Malaysia (NHMS 2023):
         </div>
         <div class="text-sm text-red-600">
          â€¢ 30.0% dewasa (6.4 juta orang)
         </div>
         <div class="text-sm text-red-600">
          â€¢ Lelaki: 33.2% | Wanita: 26.9%
         </div>
        </div>
        <div class="p-3 bg-orange-50 rounded-lg">
         <div class="text-sm font-medium text-orange-800">
          Sasaran Kebangsaan:
         </div>
         <div class="text-sm text-orange-600">
          Kurangkan kepada 25% menjelang 2030
         </div>
        </div>
       </div>
      </div><!-- Heart Disease Card -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <div class="flex items-center mb-4"><span class="text-3xl mr-3">â¤ï¸</span>
        <h3 class="text-xl font-bold text-gray-800">Penyakit Kardiovaskular</h3>
       </div>
       <div class="space-y-4">
        <div>
         <h4 class="font-semibold text-red-600 mb-2">Faktor Risiko Utama:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Kolesterol LDL &gt;2.6 mmol/L</li>
          <li>â€¢ Trigliserida &gt;1.7 mmol/L</li>
          <li>â€¢ HDL rendah (&lt;1.0 lelaki, &lt;1.3 wanita)</li>
          <li>â€¢ Sindrom metabolik</li>
          <li>â€¢ Sejarah keluarga penyakit jantung</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-orange-600 mb-2">Jenis &amp; Kesan:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Penyakit arteri koronari (CAD)</li>
          <li>â€¢ Infarksi miokardium (serangan jantung)</li>
          <li>â€¢ Gagal jantung (ejection fraction &lt;40%)</li>
          <li>â€¢ Aritmia &amp; sudden cardiac death</li>
          <li>â€¢ Penyakit vaskular periferal</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-green-600 mb-2">Pencegahan Primer:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Diet Mediterranean (omega-3 tinggi)</li>
          <li>â€¢ Senaman kardio 75min vigorous/minggu</li>
          <li>â€¢ Berhenti merokok (risiko â†“50% dalam 1 tahun)</li>
          <li>â€¢ Aspirin dosis rendah (jika risiko tinggi)</li>
         </ul>
        </div>
       </div>
       <div class="mt-4 space-y-2">
        <div class="p-3 bg-purple-50 rounded-lg">
         <div class="text-sm font-medium text-purple-800">
          Statistik Kematian (KKM 2023):
         </div>
         <div class="text-sm text-purple-600">
          â€¢ Punca kematian #1 di Malaysia (36%)
         </div>
         <div class="text-sm text-purple-600">
          â€¢ 23,000 kematian/tahun akibat CVD
         </div>
        </div>
        <div class="p-3 bg-green-50 rounded-lg">
         <div class="text-sm font-medium text-green-800">
          Pencegahan Berkesan:
         </div>
         <div class="text-sm text-green-600">
          80% boleh dicegah melalui gaya hidup
         </div>
        </div>
       </div>
      </div><!-- Obesity Card -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <div class="flex items-center mb-4"><span class="text-3xl mr-3">âš–ï¸</span>
        <h3 class="text-xl font-bold text-gray-800">Obesiti &amp; Berlebihan Berat</h3>
       </div>
       <div class="space-y-4">
        <div>
         <h4 class="font-semibold text-red-600 mb-2">Punca Kompleks:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Ketidakseimbangan tenaga (kalori masuk &gt; keluar)</li>
          <li>â€¢ Faktor genetik (FTO, MC4R genes)</li>
          <li>â€¢ Persekitaran obesogenik</li>
          <li>â€¢ Gangguan hormon (leptin, ghrelin)</li>
          <li>â€¢ Faktor psikososial &amp; stress</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-orange-600 mb-2">Komorbiditi Berkaitan:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Diabetes Jenis 2 (risiko 7x)</li>
          <li>â€¢ Hipertensi (risiko 3x)</li>
          <li>â€¢ Sleep apnea obstruktif</li>
          <li>â€¢ Kanser (payudara, kolon, endometrium)</li>
          <li>â€¢ Penyakit hati berlemak (NAFLD)</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-green-600 mb-2">Intervensi Berkesan:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Defisit kalori 500-750 kcal/hari</li>
          <li>â€¢ Aktiviti fizikal 250-300 min/minggu</li>
          <li>â€¢ Terapi tingkah laku kognitif</li>
          <li>â€¢ Sokongan keluarga &amp; komuniti</li>
         </ul>
        </div>
       </div>
       <div class="mt-4 space-y-2">
        <div class="p-3 bg-yellow-50 rounded-lg">
         <div class="text-sm font-medium text-yellow-800">
          Prevalens Malaysia (NHMS 2023):
         </div>
         <div class="text-sm text-yellow-600">
          â€¢ Obesiti: 19.7% | Berlebihan berat: 30.4%
         </div>
         <div class="text-sm text-yellow-600">
          â€¢ Jumlah: 50.1% (1 dalam 2 orang dewasa)
         </div>
        </div>
        <div class="p-3 bg-red-50 rounded-lg">
         <div class="text-sm font-medium text-red-800">
          Kos Ekonomi:
         </div>
         <div class="text-sm text-red-600">
          RM3.6 bilion/tahun (kos langsung &amp; tak langsung)
         </div>
        </div>
       </div>
      </div><!-- Cancer Card -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <div class="flex items-center mb-4"><span class="text-3xl mr-3">ğŸ—ï¸</span>
        <h3 class="text-xl font-bold text-gray-800">Kanser</h3>
       </div>
       <div class="space-y-4">
        <div>
         <h4 class="font-semibold text-red-600 mb-2">Jenis Utama di Malaysia:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Payudara (wanita) - 34.1% kes</li>
          <li>â€¢ Kolorektal - 13.3% kes</li>
          <li>â€¢ Paru-paru - 10.2% kes</li>
          <li>â€¢ Prostat (lelaki) - 7.8% kes</li>
          <li>â€¢ Serviks - 5.7% kes</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-orange-600 mb-2">Faktor Risiko:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Merokok (30% kematian kanser)</li>
          <li>â€¢ Diet tidak sihat &amp; obesiti</li>
          <li>â€¢ Alkohol berlebihan</li>
          <li>â€¢ Jangkitan (HPV, Hepatitis B)</li>
          <li>â€¢ Pendedahan bahan karsinogen</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-green-600 mb-2">Pencegahan &amp; Saringan:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Mammografi (40-74 tahun, 2 tahun sekali)</li>
          <li>â€¢ Pap smear (21-65 tahun, 3 tahun sekali)</li>
          <li>â€¢ Kolonoskopi (50+ tahun, 10 tahun sekali)</li>
          <li>â€¢ Vaksin HPV (9-26 tahun)</li>
         </ul>
        </div>
       </div>
       <div class="mt-4 space-y-2">
        <div class="p-3 bg-pink-50 rounded-lg">
         <div class="text-sm font-medium text-pink-800">
          Statistik Malaysia (NCR 2023):
         </div>
         <div class="text-sm text-pink-600">
          â€¢ 48,639 kes baru/tahun
         </div>
         <div class="text-sm text-pink-600">
          â€¢ Kadar kelangsungan hidup 5 tahun: 65%
         </div>
        </div>
       </div>
      </div><!-- COPD Card -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
       <div class="flex items-center mb-4"><span class="text-3xl mr-3">ğŸ«</span>
        <h3 class="text-xl font-bold text-gray-800">Penyakit Paru Obstruktif Kronik (COPD)</h3>
       </div>
       <div class="space-y-4">
        <div>
         <h4 class="font-semibold text-red-600 mb-2">Punca Utama:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Merokok (85-90% kes)</li>
          <li>â€¢ Pendedahan asap rokok pasif</li>
          <li>â€¢ Pencemaran udara dalam &amp; luar</li>
          <li>â€¢ Pendedahan okupasi (debu, kimia)</li>
          <li>â€¢ Defisiensi Alpha-1 antitrypsin</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-orange-600 mb-2">Simptom &amp; Komplikasi:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Sesak nafas progresif</li>
          <li>â€¢ Batuk kronik dengan kahak</li>
          <li>â€¢ Eksaserbasi akut berulang</li>
          <li>â€¢ Cor pulmonale (gagal jantung kanan)</li>
          <li>â€¢ Kualiti hidup menurun</li>
         </ul>
        </div>
        <div>
         <h4 class="font-semibold text-green-600 mb-2">Pengurusan &amp; Pencegahan:</h4>
         <ul class="text-sm text-gray-600 space-y-1">
          <li>â€¢ Berhenti merokok (intervensi terpenting)</li>
          <li>â€¢ Vaksinasi influenza &amp; pneumokokal</li>
          <li>â€¢ Rehabilitasi pulmonari</li>
          <li>â€¢ Bronkodilator &amp; steroid inhaler</li>
         </ul>
        </div>
       </div>
       <div class="mt-4 space-y-2">
        <div class="p-3 bg-cyan-50 rounded-lg">
         <div class="text-sm font-medium text-cyan-800">
          Prevalens Malaysia:
         </div>
         <div class="text-sm text-cyan-600">
          â€¢ 4.7% dewasa â‰¥40 tahun
         </div>
         <div class="text-sm text-cyan-600">
          â€¢ Punca kematian #4 di Malaysia
         </div>
        </div>
       </div>
      </div>
     </div><!-- National Action Plan -->
     <div class="bg-gradient-to-r from-blue-100 to-indigo-100 rounded-2xl p-6 mb-6">
      <h3 class="text-xl font-bold text-blue-800 mb-4 text-center">ğŸ‡²ğŸ‡¾ Pelan Tindakan Kebangsaan NCD 2021-2030</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
       <div>
        <h4 class="font-semibold text-blue-700 mb-3">Sasaran Utama WHO:</h4>
        <ul class="space-y-2 text-sm text-blue-600">
         <li>â€¢ â†“25% kematian pramatang NCD</li>
         <li>â€¢ â†“30% penggunaan tembakau</li>
         <li>â€¢ â†“10% penggunaan alkohol berbahaya</li>
         <li>â€¢ â†“15% aktiviti fizikal tidak mencukupi</li>
         <li>â€¢ â†“30% pengambilan garam</li>
        </ul>
       </div>
       <div>
        <h4 class="font-semibold text-blue-700 mb-3">Inisiatif Malaysia:</h4>
        <ul class="space-y-2 text-sm text-blue-600">
         <li>â€¢ Program Komuniti Sihat Perkasa Negara (KOSPEN)</li>
         <li>â€¢ Skim Saringan Kesihatan Percuma</li>
         <li>â€¢ Kempen "Jom Makan Sihat"</li>
         <li>â€¢ Dasar Kawalan Tembakau Kebangsaan</li>
         <li>â€¢ Program 10,000 Langkah Sehari</li>
        </ul>
       </div>
      </div>
     </div><!-- Prevention Tips -->
     <div class="bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl p-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">ğŸ›¡ï¸ Tips Pencegahan Umum</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
       <div class="text-center p-4 bg-white rounded-xl">
        <div class="text-2xl mb-2">
         ğŸ¥—
        </div>
        <div class="font-medium text-gray-800">
         Diet Seimbang
        </div>
        <div class="text-sm text-gray-600">
         Sayuran, buah-buahan, protein sihat
        </div>
       </div>
       <div class="text-center p-4 bg-white rounded-xl">
        <div class="text-2xl mb-2">
         ğŸƒ
        </div>
        <div class="font-medium text-gray-800">
         Senaman Teratur
        </div>
        <div class="text-sm text-gray-600">
         150 minit seminggu
        </div>
       </div>
       <div class="text-center p-4 bg-white rounded-xl">
        <div class="text-2xl mb-2">
         ğŸš­
        </div>
        <div class="font-medium text-gray-800">
         Berhenti Merokok
        </div>
        <div class="text-sm text-gray-600">
         Kurangkan risiko drastik
        </div>
       </div>
       <div class="text-center p-4 bg-white rounded-xl">
        <div class="text-2xl mb-2">
         ğŸ©º
        </div>
        <div class="font-medium text-gray-800">
         Pemeriksaan Berkala
        </div>
        <div class="text-sm text-gray-600">
         Kesan awal, rawat cepat
        </div>
       </div>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="showSection('home')" class="text-gray-600 hover:text-gray-800 font-medium"> â† Kembali ke Laman Utama </button>
     </div>
    </div>
   </section><!-- Dashboard Section -->
   <section id="dashboard-section" class="hidden">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg max-w-6xl mx-auto">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸ“Š Dashboard Saya</h2>
      <p class="text-gray-600">Ringkasan kemajuan kesihatan peribadi anda</p>
     </div><!-- Quick Stats -->
     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <div class="bg-gradient-to-br from-green-100 to-green-200 rounded-2xl p-6 text-center">
       <div class="text-2xl mb-2">
        âš–ï¸
       </div>
       <div class="text-sm text-gray-600 mb-1">
        BMI Terkini
       </div>
       <div class="text-2xl font-bold text-green-700" id="dashboard-bmi">
        -
       </div>
      </div>
      <div class="bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl p-6 text-center">
       <div class="text-2xl mb-2">
        ğŸƒ
       </div>
       <div class="text-sm text-gray-600 mb-1">
        Langkah Hari Ini
       </div>
       <div class="text-2xl font-bold text-purple-700" id="dashboard-steps">
        -
       </div>
      </div>
      <div class="bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl p-6 text-center">
       <div class="text-2xl mb-2">
        ğŸ
       </div>
       <div class="text-sm text-gray-600 mb-1">
        Kalori Hari Ini
       </div>
       <div class="text-2xl font-bold text-blue-700" id="dashboard-calories">
        -
       </div>
      </div>
      <div class="bg-gradient-to-br from-pink-100 to-pink-200 rounded-2xl p-6 text-center">
       <div class="text-2xl mb-2">
        ğŸ§ 
       </div>
       <div class="text-sm text-gray-600 mb-1">
        Kesihatan Mental
       </div>
       <div class="text-lg font-bold text-pink-700" id="dashboard-mental">
        -
       </div>
      </div>
     </div><!-- Comprehensive Health Summary -->
     <div class="bg-white rounded-2xl p-6 shadow-md mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-6">ğŸ“‹ Ringkasan Kesihatan Komprehensif</h3>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!-- Physical Health -->
       <div class="space-y-4">
        <h4 class="font-semibold text-gray-700 border-b pb-2">ğŸ©º Kesihatan Fizikal</h4>
        <div id="physical-health-summary" class="space-y-3">
         <div class="text-center text-gray-500 py-4">
          <div class="text-2xl mb-2">
           ğŸ“
          </div>
          <p class="text-sm">Tiada data kesihatan fizikal. Lakukan semakan kesihatan untuk melihat ringkasan.</p>
         </div>
        </div>
       </div><!-- Activity & Nutrition -->
       <div class="space-y-4">
        <h4 class="font-semibold text-gray-700 border-b pb-2">ğŸƒ Aktiviti &amp; Pemakanan</h4>
        <div id="activity-nutrition-summary" class="space-y-3">
         <div class="text-center text-gray-500 py-4">
          <div class="text-2xl mb-2">
           ğŸ“Š
          </div>
          <p class="text-sm">Tiada data aktiviti. Jejak langkah dan kalori untuk melihat kemajuan.</p>
         </div>
        </div>
       </div><!-- Mental Health -->
       <div class="space-y-4">
        <h4 class="font-semibold text-gray-700 border-b pb-2">ğŸ§  Kesihatan Mental</h4>
        <div id="mental-health-summary" class="space-y-3">
         <div class="text-center text-gray-500 py-4">
          <div class="text-2xl mb-2">
           ğŸ§˜
          </div>
          <p class="text-sm">Tiada data kesihatan mental. Lakukan ujian DASS-21 untuk penilaian.</p>
         </div>
        </div>
       </div><!-- Personality -->
       <div class="space-y-4">
        <h4 class="font-semibold text-gray-700 border-b pb-2">ğŸ§¬ Personaliti MBTI</h4>
        <div id="personality-summary" class="space-y-3">
         <div class="text-center text-gray-500 py-4">
          <div class="text-2xl mb-2">
           ğŸ¯
          </div>
          <p class="text-sm">Tiada data MBTI. Lakukan ujian personaliti untuk cadangan gaya hidup.</p>
         </div>
        </div>
       </div>
      </div>
     </div><!-- Recent Activities -->
     <div class="bg-white rounded-2xl p-6 shadow-md mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“ˆ Aktiviti Terkini (10 Terbaru)</h3>
      <div id="recent-activities" class="space-y-3">
       <div class="text-center text-gray-500 py-8">
        <div class="text-4xl mb-2">
         ğŸ“
        </div>
        <p>Belum ada data. Mula gunakan ciri-ciri Healio untuk melihat kemajuan anda!</p>
       </div>
      </div>
     </div><!-- Personal Info -->
     <div class="bg-gradient-to-r from-green-50 to-purple-50 rounded-2xl p-6 mb-6">
      <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ‘¤ Maklumat Peribadi</h3>
      <div id="personal-info" class="grid grid-cols-1 md:grid-cols-2 gap-4">
       <div><span class="text-sm text-gray-600">MBTI:</span> <span class="font-medium ml-2" id="dashboard-mbti">Belum diuji</span>
       </div>
       <div><span class="text-sm text-gray-600">Tekanan Darah:</span> <span class="font-medium ml-2" id="dashboard-bp">Belum direkod</span>
       </div>
      </div>
     </div><!-- Quick Actions -->
     <div class="bg-white rounded-2xl p-6 shadow-md">
      <h3 class="text-xl font-bold text-gray-800 mb-4">âš¡ Tindakan Pantas</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4"><button onclick="showSection('health-check')" class="p-4 bg-green-50 rounded-xl text-center hover:bg-green-100 transition-colors">
        <div class="text-2xl mb-1">
         ğŸ©º
        </div>
        <div class="text-sm font-medium">
         Semakan Kesihatan
        </div></button> <button onclick="showSection('exercise')" class="p-4 bg-purple-50 rounded-xl text-center hover:bg-purple-100 transition-colors">
        <div class="text-2xl mb-1">
         ğŸƒ
        </div>
        <div class="text-sm font-medium">
         Senaman
        </div></button> <button onclick="showSection('mental-health')" class="p-4 bg-blue-50 rounded-xl text-center hover:bg-blue-100 transition-colors">
        <div class="text-2xl mb-1">
         ğŸ§ 
        </div>
        <div class="text-sm font-medium">
         Kesihatan Mental
        </div></button> <button onclick="showSection('mbti')" class="p-4 bg-pink-50 rounded-xl text-center hover:bg-pink-100 transition-colors">
        <div class="text-2xl mb-1">
         ğŸ§¬
        </div>
        <div class="text-sm font-medium">
         MBTI
        </div></button>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="showSection('home')" class="text-gray-600 hover:text-gray-800 font-medium"> â† Kembali ke Laman Utama </button>
     </div>
    </div>
   </section>
  </div><!-- Footer -->
  <footer class="text-center py-8 mt-12 relative z-10">
   <div class="text-gray-600">
    <p class="font-medium">âœ¨ Healio â€” Memperkasa rakyat Malaysia untuk hidup lebih sihat dan bahagia, setiap hari. âœ¨</p>
   </div>
  </footer>
  <script>
        // Global variables
        let currentData = [];
        let currentQuoteIndex = 0;
        let totalCaloriesToday = 0;
        let currentFoodMode = 'preset';
        
        const motivationalQuotes = [
            "Kesihatan mental yang baik adalah asas kepada kehidupan yang bahagia.",
            "Setiap hari adalah peluang baru untuk menjaga diri dengan lebih baik.",
            "Anda lebih kuat daripada yang anda sangka. Teruskan usaha!",
            "Kesihatan adalah kekayaan sebenar. Jaga ia dengan baik.",
            "Langkah kecil hari ini membawa kepada perubahan besar esok."
        ];
        
        const foodCalories = {
            'nasi-lemak': 644,
            'teh-susu': 150,
            'steamboat': 400,
            'roti-canai': 301,
            'mee-goreng': 535,
            'char-kuey-teow': 744,
            'laksa': 569,
            'rendang': 468,
            'satay': 400,
            'cendol': 280
        };
        
        const mbtiRecommendations = {
            'INTJ': {
                lifestyle: 'Sebagai INTJ, anda suka merancang dan bekerja secara sistematik. Buat jadual senaman yang teratur dan ikuti dengan disiplin.',
                exercise: 'Senaman solo seperti larian, yoga, atau gym. Elakkan aktiviti berkumpulan yang terlalu ramai.'
            },
            'INTP': {
                lifestyle: 'INTP suka kebebasan dan fleksibiliti. Pilih aktiviti kesihatan yang boleh disesuaikan mengikut mood anda.',
                exercise: 'Berbasikal, hiking, atau senaman di rumah. Variasikan rutin untuk elak kebosanan.'
            },
            'ENTJ': {
                lifestyle: 'Sebagai pemimpin semula jadi, tetapkan matlamat kesihatan yang jelas dan ukur kemajuan secara berkala.',
                exercise: 'Senaman berkumpulan, sukan kompetitif, atau latihan intensif dengan target yang jelas.'
            },
            'ENTP': {
                lifestyle: 'ENTP suka mencuba perkara baru. Variasikan diet dan senaman untuk kekalkan minat.',
                exercise: 'Sukan pasukan, kelas fitness yang berbeza-beza, atau aktiviti luar yang mencabar.'
            },
            'INFJ': {
                lifestyle: 'INFJ memerlukan keseimbangan antara aktiviti sosial dan masa bersendirian untuk kesihatan mental yang baik.',
                exercise: 'Yoga, tai chi, atau senaman dalam kumpulan kecil yang selesa.'
            },
            'INFP': {
                lifestyle: 'Sebagai INFP, fokus pada aktiviti yang memberi makna dan kepuasan peribadi.',
                exercise: 'Yoga, meditasi bergerak, atau senaman di alam terbuka seperti hiking.'
            },
            'ENFJ': {
                lifestyle: 'ENFJ suka membantu orang lain. Sertai kumpulan kesihatan atau jadi motivator kepada rakan.',
                exercise: 'Kelas fitness berkumpulan, sukan pasukan, atau aktiviti amal yang melibatkan senaman.'
            },
            'ENFP': {
                lifestyle: 'ENFP memerlukan variasi dan keseronokan dalam rutin kesihatan untuk kekal bermotivasi.',
                exercise: 'Zumba, sukan rekreasi, atau aktiviti luar yang menyeronokkan dengan rakan.'
            },
            'ISTJ': {
                lifestyle: 'ISTJ suka rutin yang konsisten. Buat jadual makan dan senaman yang tetap dan ikuti dengan disiplin.',
                exercise: 'Jogging pada waktu yang sama setiap hari, gym dengan rutin yang tetap.'
            },
            'ISFJ': {
                lifestyle: 'ISFJ suka menjaga orang lain. Jangan lupa jaga diri sendiri juga dengan aktiviti yang menenangkan.',
                exercise: 'Yoga, pilates, atau senaman ringan yang tidak terlalu intensif.'
            },
            'ESTJ': {
                lifestyle: 'ESTJ suka struktur dan pencapaian. Tetapkan matlamat kesihatan yang boleh diukur dan capai secara berperingkat.',
                exercise: 'Latihan beban, larian dengan target jarak, atau sukan yang ada skor.'
            },
            'ESFJ': {
                lifestyle: 'ESFJ suka aktiviti sosial. Sertai kumpulan kesihatan atau ajak keluarga untuk aktiviti bersama.',
                exercise: 'Kelas aerobik, sukan berkumpulan, atau aktiviti keluarga seperti berbasikal.'
            },
            'ISTP': {
                lifestyle: 'ISTP suka aktiviti praktikal dan hands-on. Pilih senaman yang melibatkan kemahiran fizikal.',
                exercise: 'Panjat dinding, martial arts, atau senaman functional fitness.'
            },
            'ISFP': {
                lifestyle: 'ISFP suka aktiviti yang kreatif dan fleksibel. Gabungkan seni dengan senaman untuk keseronokan.',
                exercise: 'Tarian, yoga kreatif, atau aktiviti luar yang indah seperti hiking.'
            },
            'ESTP': {
                lifestyle: 'ESTP suka aksi dan keseronokan. Pilih aktiviti yang mencabar dan tidak membosankan.',
                exercise: 'Sukan ekstrim, kelas fitness intensif, atau aktiviti yang berubah-ubah.'
            },
            'ESFP': {
                lifestyle: 'ESFP suka keseronokan dan interaksi sosial. Jadikan kesihatan sebagai aktiviti yang menyeronokkan.',
                exercise: 'Zumba, sukan rekreasi, atau aktiviti berkumpulan yang meriah.'
            }
        };

        // Mental health recommendations
        const mentalHealthRecommendations = {
            anxiety: {
                normal: {
                    title: "âœ… Anxiety Normal",
                    description: "Tahap kebimbangan anda dalam julat normal. Teruskan amalan yang sihat!",
                    recommendations: [
                        "ğŸ§˜ Amalkan meditasi 5-10 minit setiap hari",
                        "ğŸƒ Senaman teratur untuk mengekalkan kesihatan mental",
                        "ğŸ˜´ Tidur yang mencukupi (7-9 jam sehari)",
                        "ğŸ¤ Kekalkan hubungan sosial yang positif"
                    ],
                    color: "green"
                },
                ringan: {
                    title: "ğŸ˜Ÿ Anxiety Ringan",
                    description: "Anda mengalami kebimbangan ringan. Amalkan teknik relaksasi untuk mengawalnya.",
                    recommendations: [
                        "ğŸŒ¬ï¸ Teknik pernafasan dalam (4-7-8 breathing)",
                        "ğŸ“ Tulis jurnal untuk mengenal pasti punca kebimbangan",
                        "ğŸµ Dengar muzik yang menenangkan",
                        "ğŸš¶ Berjalan di alam terbuka 20-30 minit",
                        "â˜• Kurangkan kafein dan alkohol"
                    ],
                    color: "yellow"
                },
                sederhana: {
                    title: "ğŸ˜° Anxiety Sederhana",
                    description: "Kebimbangan anda memerlukan perhatian. Pertimbangkan untuk mendapatkan sokongan profesional.",
                    recommendations: [
                        "ğŸ§  Teknik Cognitive Behavioral Therapy (CBT)",
                        "ğŸ§˜ Meditasi mindfulness 15-20 minit setiap hari",
                        "ğŸ“ Berbincang dengan kaunselor atau psikologi",
                        "ğŸ’ª Senaman yoga atau tai chi",
                        "ğŸ‘¥ Sertai kumpulan sokongan anxiety"
                    ],
                    color: "orange"
                },
                teruk: {
                    title: "ğŸ˜¨ Anxiety Teruk",
                    description: "Tahap kebimbangan yang tinggi. Sangat disyorkan untuk mendapatkan bantuan profesional segera.",
                    recommendations: [
                        "ğŸ¥ Jumpa doktor atau psikiatri dengan segera",
                        "ğŸ’Š Pertimbangkan rawatan ubat jika disyorkan",
                        "ğŸ†˜ Hubungi talian bantuan jika diperlukan",
                        "ğŸ‘¨â€âš•ï¸ Terapi psikologi intensif",
                        "ğŸ  Elakkan situasi yang mencetuskan anxiety"
                    ],
                    color: "red"
                },
                "sangat-teruk": {
                    title: "ğŸš¨ Anxiety Sangat Teruk",
                    description: "Tahap kebimbangan kritikal. Dapatkan bantuan kecemasan segera.",
                    recommendations: [
                        "ğŸš¨ Dapatkan bantuan kecemasan segera",
                        "ğŸ¥ Rawatan hospital mungkin diperlukan",
                        "ğŸ’Š Ubat anti-anxiety mungkin diperlukan",
                        "ğŸ‘¥ Sokongan keluarga dan rakan yang kuat",
                        "ğŸ“ Hubungi 15555 (Talian HEAL) segera"
                    ],
                    color: "red"
                }
            },
            depression: {
                normal: {
                    title: "âœ… Depression Normal",
                    description: "Tahap kemurungan anda dalam julat normal. Kekalkan kesihatan mental yang baik!",
                    recommendations: [
                        "ğŸ˜Š Amalkan gratitude journal setiap hari",
                        "ğŸŒ Dapatkan pendedahan cahaya matahari",
                        "ğŸ¤ Kekalkan hubungan sosial yang bermakna",
                        "ğŸ¯ Tetapkan matlamat harian yang realistik"
                    ],
                    color: "green"
                },
                ringan: {
                    title: "ğŸ˜” Depression Ringan",
                    description: "Anda mengalami kemurungan ringan. Amalkan aktiviti yang meningkatkan mood.",
                    recommendations: [
                        "ğŸƒ Senaman aerobik 30 minit, 3x seminggu",
                        "ğŸ¨ Aktiviti kreatif seperti melukis atau muzik",
                        "ğŸ‘¥ Luangkan masa dengan orang tersayang",
                        "ğŸ“š Baca buku motivasi atau inspirasi",
                        "ğŸŒ± Amalkan hobi yang diminati"
                    ],
                    color: "yellow"
                },
                sederhana: {
                    title: "ğŸ˜ Depression Sederhana",
                    description: "Kemurungan anda memerlukan perhatian serius. Pertimbangkan bantuan profesional.",
                    recommendations: [
                        "ğŸ§  Terapi kognitif tingkah laku (CBT)",
                        "ğŸ’¬ Berbincang dengan kaunselor berlesen",
                        "ğŸ’Š Konsultasi dengan doktor mengenai ubat",
                        "ğŸƒ Senaman teratur sebagai terapi",
                        "ğŸ“… Buat jadual harian yang berstruktur"
                    ],
                    color: "orange"
                },
                teruk: {
                    title: "ğŸ˜° Depression Teruk",
                    description: "Tahap kemurungan yang serius. Bantuan profesional segera diperlukan.",
                    recommendations: [
                        "ğŸ¥ Jumpa psikiatri dengan segera",
                        "ğŸ’Š Rawatan ubat antidepresan mungkin diperlukan",
                        "ğŸ›¡ï¸ Sistem sokongan 24/7 dari keluarga",
                        "ğŸš« Elakkan keputusan penting semasa rawatan",
                        "ğŸ“ Sentiasa ada nombor kecemasan yang boleh dihubungi"
                    ],
                    color: "red"
                },
                "sangat-teruk": {
                    title: "ğŸš¨ Depression Sangat Teruk",
                    description: "Tahap kemurungan kritikal dengan risiko tinggi. Dapatkan bantuan kecemasan.",
                    recommendations: [
                        "ğŸš¨ Dapatkan bantuan kecemasan segera",
                        "ğŸ¥ Kemungkinan perlu dimasukkan ke hospital",
                        "ğŸ‘¥ Jangan tinggal bersendirian",
                        "ğŸ’Š Rawatan ubat intensif diperlukan",
                        "ğŸ“ Hubungi Befrienders 03-7627 2929"
                    ],
                    color: "red"
                }
            },
            stress: {
                normal: {
                    title: "âœ… Stress Normal",
                    description: "Tahap tekanan anda dalam julat normal. Teruskan pengurusan stress yang baik!",
                    recommendations: [
                        "â° Pengurusan masa yang berkesan",
                        "ğŸ¯ Tetapkan prioriti yang jelas",
                        "ğŸ˜´ Tidur yang mencukupi dan berkualiti",
                        "ğŸ§˜ Teknik relaksasi ringkas setiap hari"
                    ],
                    color: "green"
                },
                ringan: {
                    title: "ğŸ˜¤ Stress Ringan",
                    description: "Anda mengalami tekanan ringan. Amalkan teknik pengurusan stress.",
                    recommendations: [
                        "ğŸ“… Organisasi jadual dan tugasan dengan baik",
                        "ğŸ› Aktiviti relaksasi seperti mandi air suam",
                        "ğŸŒ¿ Amalkan aromaterapi atau essential oil",
                        "ğŸ“± Hadkan penggunaan media sosial",
                        "ğŸµ Minum teh herba yang menenangkan"
                    ],
                    color: "yellow"
                },
                sederhana: {
                    title: "ğŸ˜« Stress Sederhana",
                    description: "Tekanan anda memerlukan perhatian. Pertimbangkan teknik pengurusan stress yang lebih intensif.",
                    recommendations: [
                        "ğŸ§˜ Kelas yoga atau meditasi terstruktur",
                        "ğŸ’¬ Berbincang dengan kaunselor stress management",
                        "ğŸƒ Program senaman untuk mengurangkan stress",
                        "ğŸ“ Teknik problem-solving yang sistematik",
                        "ğŸµ Terapi muzik atau seni"
                    ],
                    color: "orange"
                },
                teruk: {
                    title: "ğŸ˜° Stress Teruk",
                    description: "Tahap tekanan yang tinggi boleh menjejaskan kesihatan. Dapatkan bantuan profesional.",
                    recommendations: [
                        "ğŸ¥ Konsultasi dengan doktor mengenai kesan fizikal",
                        "ğŸ’Š Ubat untuk simptom fizikal jika diperlukan",
                        "ğŸ§  Terapi stress management intensif",
                        "ğŸ–ï¸ Pertimbangkan cuti atau rehat dari kerja",
                        "ğŸ‘¥ Sokongan keluarga dan rakan yang kuat"
                    ],
                    color: "red"
                },
                "sangat-teruk": {
                    title: "ğŸš¨ Stress Sangat Teruk",
                    description: "Tahap tekanan kritikal yang boleh menyebabkan burnout. Tindakan segera diperlukan.",
                    recommendations: [
                        "ğŸš¨ Dapatkan bantuan perubatan segera",
                        "ğŸ¥ Kemungkinan perlu rawatan hospital",
                        "ğŸ›‘ Berhenti dari aktiviti yang menyebabkan stress",
                        "ğŸ’Š Rawatan ubat untuk simptom fizikal",
                        "ğŸ“ Hubungi talian bantuan stress 15555"
                    ],
                    color: "red"
                }
            }
        };

        // Data SDK implementation
        const dataHandler = {
            onDataChanged(data) {
                currentData = data;
                updateDashboard();
                updateCaloriesSummary();
            }
        };

        // Element SDK implementation
        const defaultConfig = {
            app_title: "HEALIO",
            tagline: "Rakan Kesihatan Peribadi Awak",
            welcome_message: "Sihat dan Bahagia bersama Healio"
        };

        const element = {
            defaultConfig,
            onConfigChange: async (config) => {
                const appTitle = config.app_title || defaultConfig.app_title;
                const tagline = config.tagline || defaultConfig.tagline;
                const welcomeMessage = config.welcome_message || defaultConfig.welcome_message;
                
                document.getElementById('app-title').textContent = appTitle;
                document.getElementById('app-title-large').textContent = appTitle;
                document.getElementById('main-tagline').textContent = tagline;
                document.getElementById('welcome-message').textContent = welcomeMessage;
            },
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
                ["app_title", config.app_title || defaultConfig.app_title],
                ["tagline", config.tagline || defaultConfig.tagline],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
            ])
        };

        // Initialize SDKs
        async function initializeApp() {
            try {
                // Initialize Element SDK
                if (window.elementSdk) {
                    await window.elementSdk.init(element);
                }
                
                // Initialize Data SDK
                if (window.dataSdk) {
                    const result = await window.dataSdk.init(dataHandler);
                    if (!result.isOk) {
                        console.error("Failed to initialize data SDK");
                    }
                }
                
                // Initialize UI
                createFloatingBubbles();
                showCurrentQuote();
                showSection('home');
                
                // Add event listeners for custom food inputs
                setTimeout(() => {
                    const customCaloriesInput = document.getElementById('custom-calories');
                    const customPortionInput = document.getElementById('custom-portion');
                    
                    if (customCaloriesInput) {
                        customCaloriesInput.addEventListener('input', updateCustomCaloriesDisplay);
                    }
                    if (customPortionInput) {
                        customPortionInput.addEventListener('input', updateCustomCaloriesDisplay);
                    }
                }, 100);
                
            } catch (error) {
                console.error("Failed to initialize app:", error);
            }
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('section');
            sections.forEach(section => section.classList.add('hidden'));
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Update dashboard when showing it
            if (sectionName === 'dashboard') {
                updateDashboard();
            }
        }

        // Floating bubbles animation
        function createFloatingBubbles() {
            const container = document.getElementById('bubbles-container');
            
            function createBubble() {
                const bubble = document.createElement('div');
                bubble.className = 'floating-bubble';
                
                const size = Math.random() * 60 + 20;
                bubble.style.width = size + 'px';
                bubble.style.height = size + 'px';
                bubble.style.left = Math.random() * 100 + '%';
                bubble.style.animationDuration = (Math.random() * 3 + 5) + 's';
                bubble.style.animationDelay = Math.random() * 2 + 's';
                
                container.appendChild(bubble);
                
                setTimeout(() => {
                    if (bubble.parentNode) {
                        bubble.parentNode.removeChild(bubble);
                    }
                }, 8000);
            }
            
            // Create bubbles periodically
            setInterval(createBubble, 2000);
            
            // Create initial bubbles
            for (let i = 0; i < 5; i++) {
                setTimeout(createBubble, i * 400);
            }
        }

        // Food mode toggle
        function toggleFoodMode(mode) {
            currentFoodMode = mode;
            const presetToggle = document.getElementById('preset-toggle');
            const customToggle = document.getElementById('custom-toggle');
            const presetMode = document.getElementById('preset-mode');
            const customMode = document.getElementById('custom-mode');
            const customTotalDisplay = document.getElementById('custom-total-display');
            
            if (mode === 'preset') {
                presetToggle.className = 'px-6 py-2 rounded-full font-medium transition-all bg-green-500 text-white';
                customToggle.className = 'px-6 py-2 rounded-full font-medium transition-all text-gray-600 hover:text-gray-800';
                presetMode.classList.remove('hidden');
                customMode.classList.add('hidden');
                customTotalDisplay.classList.add('hidden');
            } else {
                presetToggle.className = 'px-6 py-2 rounded-full font-medium transition-all text-gray-600 hover:text-gray-800';
                customToggle.className = 'px-6 py-2 rounded-full font-medium transition-all bg-purple-500 text-white';
                presetMode.classList.add('hidden');
                customMode.classList.remove('hidden');
                customTotalDisplay.classList.remove('hidden');
                updateCustomCaloriesDisplay();
            }
        }
        
        // Update custom calories display
        function updateCustomCaloriesDisplay() {
            const calories = parseFloat(document.getElementById('custom-calories').value) || 0;
            const portion = parseFloat(document.getElementById('custom-portion').value) || 1;
            const total = Math.round(calories * portion);
            document.getElementById('custom-total-calories').textContent = total + ' kcal';
        }

        // Health check form handler
        document.getElementById('health-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('health-submit-text');
            const loadingBtn = document.getElementById('health-loading');
            
            submitBtn.classList.add('hidden');
            loadingBtn.classList.remove('hidden');
            
            const formData = new FormData(e.target);
            const height = parseFloat(formData.get('height')) / 100; // Convert to meters
            const weight = parseFloat(formData.get('weight'));
            const bmi = weight / (height * height);
            
            let bmiCategory = '';
            let riskLevel = '';
            let recommendations = '';
            
            if (bmi < 18.5) {
                bmiCategory = 'Kurang Berat';
                riskLevel = 'Sederhana';
                recommendations = `
                    <div class="space-y-4">
                        <div class="p-4 bg-yellow-50 rounded-xl">
                            <h4 class="font-bold text-yellow-800 mb-2">ğŸ Cadangan Diet:</h4>
                            <p class="text-yellow-700">Tingkatkan pengambilan kalori dengan makanan berkhasiat tinggi seperti kacang, alpukat, dan protein.</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-xl">
                            <h4 class="font-bold text-green-800 mb-2">ğŸ’ª Senaman Sesuai:</h4>
                            <p class="text-green-700">Latihan kekuatan dan senaman pembinaan otot. Elakkan kardio berlebihan.</p>
                        </div>
                    </div>
                `;
            } else if (bmi >= 18.5 && bmi < 25) {
                bmiCategory = 'Sihat';
                riskLevel = 'Rendah';
                recommendations = `
                    <div class="space-y-4">
                        <div class="p-4 bg-green-50 rounded-xl">
                            <h4 class="font-bold text-green-800 mb-2">âœ… Tahniah!</h4>
                            <p class="text-green-700">BMI anda dalam julat sihat. Teruskan gaya hidup sihat ini!</p>
                        </div>
                        <div class="p-4 bg-blue-50 rounded-xl">
                            <h4 class="font-bold text-blue-800 mb-2">ğŸƒ Kekalkan Aktiviti:</h4>
                            <p class="text-blue-700">Senaman teratur 150 minit seminggu dan diet seimbang.</p>
                        </div>
                    </div>
                `;
            } else if (bmi >= 25 && bmi < 30) {
                bmiCategory = 'Berlebihan Berat';
                riskLevel = 'Sederhana';
                recommendations = `
                    <div class="space-y-4">
                        <div class="p-4 bg-orange-50 rounded-xl">
                            <h4 class="font-bold text-orange-800 mb-2">ğŸ¥— Cadangan Diet:</h4>
                            <p class="text-orange-700">Kurangkan kalori 300-500 sehari. Fokus pada sayuran, protein tanpa lemak, dan bijirin penuh.</p>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-xl">
                            <h4 class="font-bold text-purple-800 mb-2">ğŸƒ Senaman Disyorkan:</h4>
                            <p class="text-purple-700">Kardio 30 minit, 5 kali seminggu + latihan kekuatan 2 kali seminggu.</p>
                        </div>
                    </div>
                `;
            } else {
                bmiCategory = 'Obesiti';
                riskLevel = 'Tinggi';
                recommendations = `
                    <div class="space-y-4">
                        <div class="p-4 bg-red-50 rounded-xl border-l-4 border-red-400">
                            <h4 class="font-bold text-red-800 mb-2">âš ï¸ Amaran Kesihatan</h4>
                            <p class="text-red-700">BMI anda dalam kategori obesiti. Disyorkan untuk berjumpa doktor untuk penilaian lanjut.</p>
                        </div>
                        <div class="p-4 bg-blue-50 rounded-xl">
                            <h4 class="font-bold text-blue-800 mb-2">ğŸ¥ Fasiliti Kesihatan Terdekat:</h4>
                            <a href="https://www.google.com/maps/search/hospital+near+me" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-blue-700 transition-colors">
                                Cari Hospital Terdekat
                            </a>
                        </div>
                        <div class="p-4 bg-green-50 rounded-xl">
                            <h4 class="font-bold text-green-800 mb-2">ğŸ Langkah Pertama:</h4>
                            <p class="text-green-700">Mula dengan senaman ringan 15 minit sehari dan kurangkan gula serta makanan diproses.</p>
                        </div>
                    </div>
                `;
            }
            
            // Save to data SDK
            if (window.dataSdk && currentData.length < 999) {
                const healthData = {
                    type: 'health_check',
                    name: formData.get('name'),
                    age: parseInt(formData.get('age')),
                    job: formData.get('job'),
                    height: parseFloat(formData.get('height')),
                    weight: parseFloat(formData.get('weight')),
                    blood_pressure: formData.get('blood-pressure') || '',
                    blood_sugar: formData.get('blood-sugar') || '',
                    bmi: parseFloat(bmi.toFixed(1)),
                    bmi_category: bmiCategory,
                    date: new Date().toISOString()
                };
                
                const result = await window.dataSdk.create(healthData);
                if (!result.isOk) {
                    console.error("Failed to save health data");
                }
            }
            
            // Show results
            const resultsDiv = document.getElementById('health-results');
            resultsDiv.innerHTML = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">Keputusan Analisis Kesihatan</h3>
                    <div class="inline-block bg-white rounded-2xl p-6 shadow-md">
                        <div class="text-4xl font-bold ${bmi >= 18.5 && bmi < 25 ? 'text-green-600' : bmi < 18.5 || (bmi >= 25 && bmi < 30) ? 'text-orange-600' : 'text-red-600'} mb-2">
                            ${bmi.toFixed(1)}
                        </div>
                        <div class="text-lg font-medium text-gray-700">${bmiCategory}</div>
                        <div class="text-sm text-gray-500">Tahap Risiko: ${riskLevel}</div>
                    </div>
                </div>
                ${recommendations}
            `;
            resultsDiv.classList.remove('hidden');
            
            submitBtn.classList.remove('hidden');
            loadingBtn.classList.add('hidden');
        });

        // Steps tracking
        async function saveSteps() {
            const stepsInput = document.getElementById('daily-steps');
            const steps = parseInt(stepsInput.value) || 0;
            
            if (steps > 0 && window.dataSdk && currentData.length < 999) {
                const stepsData = {
                    type: 'exercise',
                    exercise_type: 'daily_steps',
                    daily_steps: steps,
                    date: new Date().toISOString()
                };
                
                const result = await window.dataSdk.create(stepsData);
                if (result.isOk) {
                    updateStepsProgress(steps);
                    stepsInput.value = '';
                }
            }
        }

        function updateStepsProgress(steps) {
            const target = 10000;
            const percentage = Math.min((steps / target) * 100, 100);
            
            document.getElementById('steps-percentage').textContent = percentage.toFixed(0) + '%';
            document.getElementById('steps-progress').style.width = percentage + '%';
        }

        // Food tracking
        document.getElementById('food-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (currentData.length >= 999) {
                alert('Had maksimum 999 rekod makanan telah dicapai. Sila padam beberapa rekod lama terlebih dahulu.');
                return;
            }
            
            let submitBtn, loadingBtn, foodName, totalCalories, isCustom = false;
            
            if (currentFoodMode === 'preset') {
                submitBtn = document.getElementById('food-submit-text');
                loadingBtn = document.getElementById('food-loading');
                
                const formData = new FormData(e.target);
                foodName = formData.get('food-name');
                const portion = parseFloat(formData.get('portion')) || 1;
                
                if (!foodName) {
                    alert('Sila pilih makanan terlebih dahulu.');
                    return;
                }
                
                const baseCalories = foodCalories[foodName] || 0;
                totalCalories = Math.round(baseCalories * portion);
            } else {
                submitBtn = document.getElementById('custom-food-submit-text');
                loadingBtn = document.getElementById('custom-food-loading');
                
                const customFoodName = document.getElementById('custom-food-name').value.trim();
                const customCalories = parseFloat(document.getElementById('custom-calories').value) || 0;
                const customPortion = parseFloat(document.getElementById('custom-portion').value) || 1;
                
                if (!customFoodName || customCalories <= 0) {
                    alert('Sila masukkan nama makanan dan kalori yang sah.');
                    return;
                }
                
                foodName = customFoodName;
                totalCalories = Math.round(customCalories * customPortion);
                isCustom = true;
            }
            
            submitBtn.classList.add('hidden');
            loadingBtn.classList.remove('hidden');
            
            if (window.dataSdk) {
                const foodData = {
                    type: 'calories',
                    food_items: foodName,
                    calories: totalCalories,
                    is_custom: isCustom,
                    date: new Date().toISOString()
                };
                
                const result = await window.dataSdk.create(foodData);
                if (result.isOk) {
                    // Reset form
                    if (currentFoodMode === 'preset') {
                        document.getElementById('food-name').value = '';
                        document.getElementById('portion').value = '1';
                    } else {
                        document.getElementById('custom-food-name').value = '';
                        document.getElementById('custom-calories').value = '';
                        document.getElementById('custom-portion').value = '1';
                        updateCustomCaloriesDisplay();
                    }
                    
                    // Show success message
                    const successMsg = document.createElement('div');
                    successMsg.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                    successMsg.textContent = `âœ… ${foodName} (${totalCalories} kcal) berjaya ditambah!`;
                    document.body.appendChild(successMsg);
                    
                    setTimeout(() => {
                        if (successMsg.parentNode) {
                            successMsg.parentNode.removeChild(successMsg);
                        }
                    }, 3000);
                } else {
                    alert('Ralat menyimpan data makanan. Sila cuba lagi.');
                }
            }
            
            submitBtn.classList.remove('hidden');
            loadingBtn.classList.add('hidden');
        });

        function updateCaloriesSummary() {
            const today = new Date().toDateString();
            const todayCalories = currentData
                .filter(item => item.type === 'calories' && new Date(item.date).toDateString() === today)
                .reduce((sum, item) => sum + (item.calories || 0), 0);
            
            totalCaloriesToday = todayCalories;
            const target = 2000;
            const remaining = Math.max(target - todayCalories, 0);
            const percentage = Math.min((todayCalories / target) * 100, 100);
            
            document.getElementById('total-calories').textContent = todayCalories;
            document.getElementById('remaining-calories').textContent = remaining;
            document.getElementById('calorie-progress').style.width = percentage + '%';
        }

        // Mental health form
        document.getElementById('mental-health-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('mental-submit-text');
            const loadingBtn = document.getElementById('mental-loading');
            
            submitBtn.classList.add('hidden');
            loadingBtn.classList.remove('hidden');
            
            const formData = new FormData(e.target);
            const anxietyLevel = formData.get('anxiety-level');
            const depressionLevel = formData.get('depression-level');
            const stressLevel = formData.get('stress-level');
            
            if ((anxietyLevel || depressionLevel || stressLevel) && window.dataSdk && currentData.length < 999) {
                const mentalData = {
                    type: 'mental_health',
                    anxiety_level: anxietyLevel || 'normal',
                    depression_level: depressionLevel || 'normal',
                    stress_level: stressLevel || 'normal',
                    date: new Date().toISOString()
                };
                
                const result = await window.dataSdk.create(mentalData);
                if (result.isOk) {
                    showMentalHealthResults(anxietyLevel, depressionLevel, stressLevel);
                    e.target.reset();
                }
            }
            
            submitBtn.classList.remove('hidden');
            loadingBtn.classList.add('hidden');
        });

        function showMentalHealthResults(anxietyLevel, depressionLevel, stressLevel) {
            const resultsDiv = document.getElementById('mental-health-results');
            let resultsHTML = '<div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6"><h3 class="text-xl font-bold text-gray-800 mb-6 text-center">ğŸ“Š Keputusan & Cadangan Kesihatan Mental</h3><div class="space-y-6">';
            
            // Anxiety Results
            if (anxietyLevel && mentalHealthRecommendations.anxiety[anxietyLevel]) {
                const anxiety = mentalHealthRecommendations.anxiety[anxietyLevel];
                resultsHTML += `
                    <div class="bg-white rounded-xl p-5 border-l-4 border-${anxiety.color}-500">
                        <h4 class="font-bold text-${anxiety.color}-800 text-lg mb-2">${anxiety.title}</h4>
                        <p class="text-gray-700 mb-4">${anxiety.description}</p>
                        <div class="space-y-2">
                            <h5 class="font-semibold text-gray-800">Cadangan Tindakan:</h5>
                            <ul class="space-y-1">
                                ${anxiety.recommendations.map(rec => `<li class="text-sm text-gray-600">${rec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            // Depression Results
            if (depressionLevel && mentalHealthRecommendations.depression[depressionLevel]) {
                const depression = mentalHealthRecommendations.depression[depressionLevel];
                resultsHTML += `
                    <div class="bg-white rounded-xl p-5 border-l-4 border-${depression.color}-500">
                        <h4 class="font-bold text-${depression.color}-800 text-lg mb-2">${depression.title}</h4>
                        <p class="text-gray-700 mb-4">${depression.description}</p>
                        <div class="space-y-2">
                            <h5 class="font-semibold text-gray-800">Cadangan Tindakan:</h5>
                            <ul class="space-y-1">
                                ${depression.recommendations.map(rec => `<li class="text-sm text-gray-600">${rec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            // Stress Results
            if (stressLevel && mentalHealthRecommendations.stress[stressLevel]) {
                const stress = mentalHealthRecommendations.stress[stressLevel];
                resultsHTML += `
                    <div class="bg-white rounded-xl p-5 border-l-4 border-${stress.color}-500">
                        <h4 class="font-bold text-${stress.color}-800 text-lg mb-2">${stress.title}</h4>
                        <p class="text-gray-700 mb-4">${stress.description}</p>
                        <div class="space-y-2">
                            <h5 class="font-semibold text-gray-800">Cadangan Tindakan:</h5>
                            <ul class="space-y-1">
                                ${stress.recommendations.map(rec => `<li class="text-sm text-gray-600">${rec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            // Emergency Contact Info
            const hasHighRisk = (anxietyLevel === 'teruk' || anxietyLevel === 'sangat-teruk') || 
                               (depressionLevel === 'teruk' || depressionLevel === 'sangat-teruk') || 
                               (stressLevel === 'teruk' || stressLevel === 'sangat-teruk');
            
            if (hasHighRisk) {
                resultsHTML += `
                    <div class="bg-red-50 rounded-xl p-5 border-2 border-red-200">
                        <h4 class="font-bold text-red-800 text-lg mb-3">ğŸ†˜ Talian Bantuan Kecemasan</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-lg p-3">
                                <div class="font-semibold text-red-700">Talian HEAL (KKM)</div>
                                <div class="text-red-600 text-lg font-bold">15555</div>
                                <div class="text-sm text-red-600">24 jam, percuma</div>
                            </div>
                            <div class="bg-white rounded-lg p-3">
                                <div class="font-semibold text-red-700">Befrienders</div>
                                <div class="text-red-600 text-lg font-bold">03-7627 2929</div>
                                <div class="text-sm text-red-600">24 jam, sokongan emosi</div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            resultsHTML += '</div></div>';
            resultsDiv.innerHTML = resultsHTML;
            resultsDiv.classList.remove('hidden');
        }

        // Motivational quotes
        function showCurrentQuote() {
            document.getElementById('current-quote').textContent = motivationalQuotes[currentQuoteIndex];
        }

        function nextQuote() {
            currentQuoteIndex = (currentQuoteIndex + 1) % motivationalQuotes.length;
            showCurrentQuote();
        }

        function previousQuote() {
            currentQuoteIndex = (currentQuoteIndex - 1 + motivationalQuotes.length) % motivationalQuotes.length;
            showCurrentQuote();
        }

        // MBTI form
        document.getElementById('mbti-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('mbti-submit-text');
            const loadingBtn = document.getElementById('mbti-loading');
            
            submitBtn.classList.add('hidden');
            loadingBtn.classList.remove('hidden');
            
            const formData = new FormData(e.target);
            const mbtiType = formData.get('mbti-type');
            
            if (mbtiType && window.dataSdk && currentData.length < 999) {
                const mbtiData = {
                    type: 'mbti',
                    mbti_type: mbtiType,
                    date: new Date().toISOString()
                };
                
                const result = await window.dataSdk.create(mbtiData);
                if (result.isOk) {
                    showMBTIRecommendations(mbtiType);
                    e.target.reset();
                }
            }
            
            submitBtn.classList.remove('hidden');
            loadingBtn.classList.add('hidden');
        });

        function showMBTIRecommendations(mbtiType) {
            const recommendations = mbtiRecommendations[mbtiType];
            if (recommendations) {
                document.getElementById('mbti-lifestyle-content').innerHTML = `
                    <p class="text-gray-700 mb-4">${recommendations.lifestyle}</p>
                `;
                
                document.getElementById('mbti-exercise-content').innerHTML = `
                    <p class="text-gray-700">${recommendations.exercise}</p>
                `;
                
                document.getElementById('mbti-recommendations').classList.remove('hidden');
            }
        }

        // Dashboard updates
        function updateDashboard() {
            if (currentData.length === 0) return;
            
            // Get latest data
            const latestHealth = currentData.filter(item => item.type === 'health_check').pop();
            const latestSteps = currentData.filter(item => item.type === 'exercise' && item.exercise_type === 'daily_steps').pop();
            const latestMental = currentData.filter(item => item.type === 'mental_health').pop();
            const latestMBTI = currentData.filter(item => item.type === 'mbti').pop();
            
            // Update dashboard stats
            document.getElementById('dashboard-bmi').textContent = latestHealth ? latestHealth.bmi : '-';
            document.getElementById('dashboard-steps').textContent = latestSteps ? latestSteps.daily_steps.toLocaleString() : '-';
            document.getElementById('dashboard-calories').textContent = totalCaloriesToday || '-';
            
            // Update mental health display with detailed breakdown
            if (latestMental) {
                const anxiety = latestMental.anxiety_level || 'normal';
                const depression = latestMental.depression_level || 'normal';
                const stress = latestMental.stress_level || 'normal';
                document.getElementById('dashboard-mental').innerHTML = `
                    <div class="text-xs space-y-1">
                        <div>A: ${anxiety}</div>
                        <div>D: ${depression}</div>
                        <div>S: ${stress}</div>
                    </div>
                `;
            } else {
                document.getElementById('dashboard-mental').textContent = '-';
            }
            document.getElementById('dashboard-mbti').textContent = latestMBTI ? latestMBTI.mbti_type : 'Belum diuji';
            document.getElementById('dashboard-bp').textContent = latestHealth && latestHealth.blood_pressure ? latestHealth.blood_pressure : 'Belum direkod';
            
            // Update comprehensive health summary
            updateComprehensiveHealthSummary(latestHealth, latestSteps, latestMental, latestMBTI);
            
            // Update recent activities
            const recentActivities = currentData
                .slice(-10)
                .reverse()
                .map(item => {
                    const date = new Date(item.date);
                    const dateStr = date.toLocaleDateString('ms-MY');
                    const timeStr = date.toLocaleTimeString('ms-MY', { hour: '2-digit', minute: '2-digit' });
                    let activity = '';
                    
                    switch(item.type) {
                        case 'health_check':
                            activity = `ğŸ©º Semakan kesihatan - BMI: ${item.bmi} (${item.bmi_category})`;
                            break;
                        case 'exercise':
                            activity = `ğŸƒ Langkah harian: ${item.daily_steps?.toLocaleString()}`;
                            break;
                        case 'calories':
                            const foodDisplay = item.is_custom ? `${item.food_items} (Custom)` : item.food_items.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                            activity = `ğŸ Makanan: ${foodDisplay} (${item.calories} kcal)`;
                            break;
                        case 'mental_health':
                            const anxietyDisplay = item.anxiety_level || 'normal';
                            const depressionDisplay = item.depression_level || 'normal';
                            const stressDisplay = item.stress_level || 'normal';
                            activity = `ğŸ§  Kesihatan mental - A:${anxietyDisplay}, D:${depressionDisplay}, S:${stressDisplay}`;
                            break;
                        case 'mbti':
                            activity = `ğŸ§¬ MBTI: ${item.mbti_type}`;
                            break;
                    }
                    
                    return `
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-xl">
                            <span class="text-gray-700 flex-1">${activity}</span>
                            <div class="text-xs text-gray-500 text-right ml-4">
                                <div>${dateStr}</div>
                                <div>${timeStr}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            
            if (recentActivities) {
                document.getElementById('recent-activities').innerHTML = recentActivities;
            }
        }

        function updateComprehensiveHealthSummary(latestHealth, latestSteps, latestMental, latestMBTI) {
            // Physical Health Summary
            const physicalHealthDiv = document.getElementById('physical-health-summary');
            if (latestHealth) {
                const bmiColor = latestHealth.bmi >= 18.5 && latestHealth.bmi < 25 ? 'text-green-600' : 
                               latestHealth.bmi < 18.5 || (latestHealth.bmi >= 25 && latestHealth.bmi < 30) ? 'text-orange-600' : 'text-red-600';
                
                physicalHealthDiv.innerHTML = `
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Nama:</span>
                            <span class="font-medium">${latestHealth.name}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Umur:</span>
                            <span class="font-medium">${latestHealth.age} tahun</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">BMI:</span>
                            <span class="font-bold ${bmiColor}">${latestHealth.bmi} (${latestHealth.bmi_category})</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Berat/Tinggi:</span>
                            <span class="font-medium">${latestHealth.weight}kg / ${latestHealth.height}cm</span>
                        </div>
                        ${latestHealth.blood_pressure ? `
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Tekanan Darah:</span>
                            <span class="font-medium">${latestHealth.blood_pressure}</span>
                        </div>` : ''}
                        ${latestHealth.blood_sugar ? `
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Gula Darah:</span>
                            <span class="font-medium">${latestHealth.blood_sugar}</span>
                        </div>` : ''}
                    </div>
                `;
            } else {
                physicalHealthDiv.innerHTML = `
                    <div class="text-center text-gray-500 py-4">
                        <div class="text-2xl mb-2">ğŸ“</div>
                        <p class="text-sm">Tiada data kesihatan fizikal. Lakukan semakan kesihatan untuk melihat ringkasan.</p>
                    </div>
                `;
            }

            // Activity & Nutrition Summary
            const activityNutritionDiv = document.getElementById('activity-nutrition-summary');
            const todaySteps = latestSteps ? latestSteps.daily_steps : 0;
            const stepsPercentage = Math.min((todaySteps / 10000) * 100, 100);
            const caloriesPercentage = Math.min((totalCaloriesToday / 2000) * 100, 100);
            
            if (todaySteps > 0 || totalCaloriesToday > 0) {
                activityNutritionDiv.innerHTML = `
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-600">ğŸƒ Langkah Hari Ini:</span>
                                <span class="font-medium">${todaySteps.toLocaleString()}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-purple-400 to-purple-600 h-2 rounded-full" style="width: ${stepsPercentage}%"></div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">${stepsPercentage.toFixed(0)}% dari sasaran 10,000</div>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-600">ğŸ Kalori Hari Ini:</span>
                                <span class="font-medium">${totalCaloriesToday} kcal</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-blue-400 to-blue-600 h-2 rounded-full" style="width: ${caloriesPercentage}%"></div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">${caloriesPercentage.toFixed(0)}% dari sasaran 2,000</div>
                        </div>
                    </div>
                `;
            } else {
                activityNutritionDiv.innerHTML = `
                    <div class="text-center text-gray-500 py-4">
                        <div class="text-2xl mb-2">ğŸ“Š</div>
                        <p class="text-sm">Tiada data aktiviti. Jejak langkah dan kalori untuk melihat kemajuan.</p>
                    </div>
                `;
            }

            // Mental Health Summary
            const mentalHealthDiv = document.getElementById('mental-health-summary');
            if (latestMental) {
                const anxiety = latestMental.anxiety_level || 'normal';
                const depression = latestMental.depression_level || 'normal';
                const stress = latestMental.stress_level || 'normal';
                
                const getColorClass = (level) => {
                    switch(level) {
                        case 'normal': return 'text-green-600 bg-green-50';
                        case 'ringan': return 'text-yellow-600 bg-yellow-50';
                        case 'sederhana': return 'text-orange-600 bg-orange-50';
                        case 'teruk':
                        case 'sangat-teruk': return 'text-red-600 bg-red-50';
                        default: return 'text-gray-600 bg-gray-50';
                    }
                };
                
                mentalHealthDiv.innerHTML = `
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">ğŸ˜° Anxiety:</span>
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${getColorClass(anxiety)}">${anxiety}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">ğŸ˜” Depression:</span>
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${getColorClass(depression)}">${depression}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">ğŸ˜¤ Stress:</span>
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${getColorClass(stress)}">${stress}</span>
                        </div>
                    </div>
                `;
            } else {
                mentalHealthDiv.innerHTML = `
                    <div class="text-center text-gray-500 py-4">
                        <div class="text-2xl mb-2">ğŸ§˜</div>
                        <p class="text-sm">Tiada data kesihatan mental. Lakukan ujian DASS-21 untuk penilaian.</p>
                    </div>
                `;
            }

            // Personality Summary
            const personalityDiv = document.getElementById('personality-summary');
            if (latestMBTI) {
                const recommendations = mbtiRecommendations[latestMBTI.mbti_type];
                personalityDiv.innerHTML = `
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Jenis MBTI:</span>
                            <span class="font-bold text-purple-600">${latestMBTI.mbti_type}</span>
                        </div>
                        ${recommendations ? `
                        <div class="p-3 bg-purple-50 rounded-lg">
                            <h5 class="font-semibold text-purple-800 mb-2">ğŸ¯ Gaya Hidup:</h5>
                            <p class="text-sm text-purple-700">${recommendations.lifestyle}</p>
                        </div>
                        <div class="p-3 bg-green-50 rounded-lg">
                            <h5 class="font-semibold text-green-800 mb-2">ğŸ’ª Senaman Sesuai:</h5>
                            <p class="text-sm text-green-700">${recommendations.exercise}</p>
                        </div>` : ''}
                    </div>
                `;
            } else {
                personalityDiv.innerHTML = `
                    <div class="text-center text-gray-500 py-4">
                        <div class="text-2xl mb-2">ğŸ¯</div>
                        <p class="text-sm">Tiada data MBTI. Lakukan ujian personaliti untuk cadangan gaya hidup.</p>
                    </div>
                `;
            }
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99991bed97a124d2',t:'MTc2MjMxMTcxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
